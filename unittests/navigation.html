<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" href="../framework/jquery.mobile-1.4.5/jquery.mobile-1.4.5.css">
		<script src="../framework/jquery-2.1.3.js"></script>
		<script src="../framework/jquery.mobile-1.4.5/jquery.mobile-1.4.5.js"></script>
		<link rel="stylesheet" href="../framework/qunit-1.17.1.css">
		<script src="../framework/qunit-1.17.1.js"></script>
		<script src="../js/navigation.js"></script>
		<script>
			QUnit.test("Split URL", function(assert) {
				var nav = new Navigation();
				assert.equal(nav.splitUrl("index.html"), "index");
				assert.equal(nav.splitUrl("index"), "index");
				assert.equal(nav.splitUrl("index.bestpageever.html"), "indexbestpageever");
				assert.equal(nav.splitUrl(), "");
			});
			QUnit.test("Load Page", function(assert) {
				var done = assert.async();
				var nav = new Navigation();
				nav.loadPage("pageloadertest.html");
				setTimeout(function() {
					assert.equal($("#content").text(), "This is a test.");
					assert.equal(window.location.hash, "#pageloadertest");
					done();
				}, 100);
			});
			QUnit.test("Build Url", function(assert) {
				var nav = new Navigation();
				assert.equal(nav.buildUrl("#home"),"home.html");
			});
			QUnit.test("Browser back button", function(assert) {
				var done = assert.async();
				var nav = new Navigation();
				nav.loadPage("browserbacktest.html");
				setTimeout(function() {
					nav.loadPage("pageloadertest.html");
					setTimeout(function() {
						window.history.back();
						setTimeout(function() {
							assert.equal(window.location.hash, "#browserbacktest");
							assert.equal($("#content").text(), "Juhu we are back.");
							done();
						}, 100);
					}, 100);
				}, 100);
			});

		</script>
	</head>
	<body>

		<div id="qunit">

		</div>
		<div id="qunit-fixture">
			<div class="test" id="content">
				Hallo Welt!
			</div>
		</div>

	</body>
</html>